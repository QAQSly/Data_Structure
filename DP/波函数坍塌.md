# 波函数坍塌
## 生成有机网格
1. 生成六边形点阵
2. 根据六边形点阵画出三角形
3. 合并相邻的两个三角形为四边形
4. 细分-> 四边形细分成四个小四边形 剩下的三角形细分成三个小四边形 
5. 网格平滑，平滑所有得到的小四边形网格
* 示意图
* 正方体坐标系

![](https://s2.loli.net/2024/06/22/RYve8KxTOEdo2V1.png)

* 正方体坐标系 六边形

![](https://s2.loli.net/2024/06/22/PRMaZpGw95gVFkH.png)
* qrs 和为0

* 邻居计算 neighbors 

![](https://s2.loli.net/2024/06/22/U2WMAyaBoOfRwGX.png)

当六边形移动到相邻坐标时，qrs 可选则加1，即有三种可能，剩下两个坐标可选-1 即有两种可能，即有六种可能，六种可能需满足 q + r + s = 0;

计算新的坐标可以通过两个坐标之间的差值(向量)，旧的坐标 + 向量 = 新的坐标

* 环状绘制 Single ring

![](https://s2.loli.net/2024/06/22/vjBJeucIPHEwQ3f.png)
环状绘制 依次创建周围的点